<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <h1>Buscador de Versículos</h1>
    <div id="verseDisplay">El versículo aparecerá aquí</div>

    <script>
        // Función para obtener un parámetro de la URL
        function getParameterByName(name, url = window.location.href) {
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        // Función para buscar un versículo en el XML
        function findVerseInXML(bookName, chapterNumber, verseNumber, xmlData) {
            var parser = new DOMParser();
            var xmlDoc = parser.parseFromString(xmlData, "text/xml");

            var book = Array.from(xmlDoc.getElementsByTagName("book")).find(book => book.getAttribute("name") === bookName);
            if (!book) return 'Book not found';

            var chapter = Array.from(book.getElementsByTagName("chapter")).find(chapter => chapter.getAttribute("number") === chapterNumber);
            if (!chapter) return 'Chapter not found';

            var verse = Array.from(chapter.getElementsByTagName("verse")).find(verse => verse.getAttribute("number") === verseNumber);
            if (!verse) return 'Verse not found';

            return verse.textContent || 'Verse not found';
        }

        // Función para cargar el XML y buscar el versículo
        function loadXMLAndFindVerse(xmlFilePath) {
            fetch(xmlFilePath)
                .then(response => response.text())
                .then(data => {
                    var book = getParameterByName('book');
                    var chapter = getParameterByName('chapter');
                    var verse = getParameterByName('verse');

                    if (book && chapter && verse) {
                        var verseText = findVerseInXML(book, chapter, verse, data);
                        document.getElementById('verseDisplay').innerText = verseText;
                    } else {
                        document.getElementById('verseDisplay').innerText = 'Please provide book, chapter, and verse in the URL.';
                    }
                })
                .catch(error => {
                    console.error('Error loading XML file:', error);
                    document.getElementById('verseDisplay').innerText = 'Error loading XML file.';
                });
        }

        // Ruta del archivo XML (ajústala según tu entorno)
        var xmlFilePath = 'evangelio.xml';

        // Cargar el XML y buscar el versículo
        loadXMLAndFindVerse(xmlFilePath);
    </script>
</body>
</html>
